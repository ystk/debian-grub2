Description: Ignore entries with direct.inode = 0.
Author: Samuel Thibault <samuel.thibault@ens-lyon.org>
Origin: upstream, http://bazaar.launchpad.net/~vcs-imports/grub/grub2-bzr/revision/3749
Forwarded: not-needed
Applied-Upstream: http://bazaar.launchpad.net/~vcs-imports/grub/grub2-bzr/revision/3749
Last-Update: 2012-06-08

--- a/grub-core/fs/ext2.c	2012-01-14 10:30:43 +0000
+++ b/grub-core/fs/ext2.c	2012-01-14 10:55:20 +0000
@@ -685,7 +685,7 @@ grub_ext2_iterate_dir (grub_fshelp_node_
       if (dirent.direntlen == 0)
         return 0;
 
-      if (dirent.namelen != 0)
+      if (dirent.inode != 0 && dirent.namelen != 0)
 	{
 	  char filename[dirent.namelen + 1];
 	  struct grub_fshelp_node *fdiro;

