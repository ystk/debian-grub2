# -*- makefile -*-
# Generated by genmk.rb, please don't edit!

MAINTAINER_CLEANFILES += $(srcdir)/conf/gcry.rmk $(srcdir)/lib/libgcrypt-grub/cipher/ChangeLog $(srcdir)/lib/libgcrypt-grub/cipher/cipher.h $(srcdir)/lib/libgcrypt-grub/cipher/crypto.lst $(srcdir)/lib/libgcrypt-grub/cipher/g10lib.h $(srcdir)/lib/libgcrypt-grub/cipher/memory.h $(srcdir)/lib/libgcrypt-grub/cipher/types.h
MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/rijndael.c
pkglib_MODULES += gcry_rijndael.mod
gcry_rijndael_mod_SOURCES = lib/libgcrypt-grub/cipher/rijndael.c

clean-module-gcry_rijndael.mod.1:
	rm -f gcry_rijndael.mod mod-gcry_rijndael.o mod-gcry_rijndael.c pre-gcry_rijndael.o gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.o und-gcry_rijndael.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_rijndael.mod.1

clean-module-gcry_rijndael.mod-symbol.1:
	rm -f def-gcry_rijndael.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_rijndael.mod-symbol.1
DEFSYMFILES += def-gcry_rijndael.lst
mostlyclean-module-gcry_rijndael.mod.1:
	rm -f gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_rijndael.mod.1
UNDSYMFILES += und-gcry_rijndael.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_rijndael.mod: pre-gcry_rijndael.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_rijndael_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_rijndael.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_rijndael.mod: pre-gcry_rijndael.o mod-gcry_rijndael.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_rijndael_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_rijndael.o mod-gcry_rijndael.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_rijndael.mod: pre-gcry_rijndael.o mod-gcry_rijndael.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_rijndael_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_rijndael.o mod-gcry_rijndael.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_rijndael.o: $(gcry_rijndael_mod_DEPENDENCIES) gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.o
	-rm -f $@
	$(TARGET_CC) $(gcry_rijndael_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.o

mod-gcry_rijndael.o: mod-gcry_rijndael.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_rijndael_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_rijndael.c\" -c -o $@ $<

mod-gcry_rijndael.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_rijndael' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_rijndael.lst: pre-gcry_rijndael.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_rijndael/' > $@
else
def-gcry_rijndael.lst: pre-gcry_rijndael.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_rijndael/' > $@
endif

und-gcry_rijndael.lst: pre-gcry_rijndael.o
	echo 'gcry_rijndael' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.o: lib/libgcrypt-grub/cipher/rijndael.c $(lib/libgcrypt-grub/cipher/rijndael.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rijndael_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/rijndael.c\" -MD -c -o $@ $<
-include gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.d

clean-module-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael-extra.1:
	rm -f cmd-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst fs-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst partmap-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst handler-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst parttool-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst video-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst terminal-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael-extra.1

COMMANDFILES += cmd-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst
FSFILES += fs-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst
PARTTOOLFILES += parttool-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst
PARTMAPFILES += partmap-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst
HANDLERFILES += handler-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst
TERMINALFILES += terminal-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst
VIDEOFILES += video-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst

cmd-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst: lib/libgcrypt-grub/cipher/rijndael.c $(lib/libgcrypt-grub/cipher/rijndael.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rijndael_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_rijndael > $@ || (rm -f $@; exit 1)

fs-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst: lib/libgcrypt-grub/cipher/rijndael.c $(lib/libgcrypt-grub/cipher/rijndael.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_rijndael_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_rijndael > $@ || (rm -f $@; exit 1)

parttool-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst: lib/libgcrypt-grub/cipher/rijndael.c $(lib/libgcrypt-grub/cipher/rijndael.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rijndael_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_rijndael > $@ || (rm -f $@; exit 1)

partmap-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst: lib/libgcrypt-grub/cipher/rijndael.c $(lib/libgcrypt-grub/cipher/rijndael.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_rijndael_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_rijndael > $@ || (rm -f $@; exit 1)

handler-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst: lib/libgcrypt-grub/cipher/rijndael.c $(lib/libgcrypt-grub/cipher/rijndael.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rijndael_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_rijndael > $@ || (rm -f $@; exit 1)

terminal-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst: lib/libgcrypt-grub/cipher/rijndael.c $(lib/libgcrypt-grub/cipher/rijndael.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rijndael_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_rijndael > $@ || (rm -f $@; exit 1)

video-gcry_rijndael_mod-lib_libgcrypt_grub_cipher_rijndael.lst: lib/libgcrypt-grub/cipher/rijndael.c $(lib/libgcrypt-grub/cipher/rijndael.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_rijndael_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_rijndael > $@ || (rm -f $@; exit 1)

gcry_rijndael_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_rijndael_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/sha512.c
pkglib_MODULES += gcry_sha512.mod
gcry_sha512_mod_SOURCES = lib/libgcrypt-grub/cipher/sha512.c

clean-module-gcry_sha512.mod.1:
	rm -f gcry_sha512.mod mod-gcry_sha512.o mod-gcry_sha512.c pre-gcry_sha512.o gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.o und-gcry_sha512.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_sha512.mod.1

clean-module-gcry_sha512.mod-symbol.1:
	rm -f def-gcry_sha512.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_sha512.mod-symbol.1
DEFSYMFILES += def-gcry_sha512.lst
mostlyclean-module-gcry_sha512.mod.1:
	rm -f gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_sha512.mod.1
UNDSYMFILES += und-gcry_sha512.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_sha512.mod: pre-gcry_sha512.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_sha512_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_sha512.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_sha512.mod: pre-gcry_sha512.o mod-gcry_sha512.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_sha512_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_sha512.o mod-gcry_sha512.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_sha512.mod: pre-gcry_sha512.o mod-gcry_sha512.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_sha512_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_sha512.o mod-gcry_sha512.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_sha512.o: $(gcry_sha512_mod_DEPENDENCIES) gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.o
	-rm -f $@
	$(TARGET_CC) $(gcry_sha512_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.o

mod-gcry_sha512.o: mod-gcry_sha512.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_sha512_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_sha512.c\" -c -o $@ $<

mod-gcry_sha512.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_sha512' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_sha512.lst: pre-gcry_sha512.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_sha512/' > $@
else
def-gcry_sha512.lst: pre-gcry_sha512.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_sha512/' > $@
endif

und-gcry_sha512.lst: pre-gcry_sha512.o
	echo 'gcry_sha512' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.o: lib/libgcrypt-grub/cipher/sha512.c $(lib/libgcrypt-grub/cipher/sha512.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha512_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/sha512.c\" -MD -c -o $@ $<
-include gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.d

clean-module-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512-extra.1:
	rm -f cmd-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst fs-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst partmap-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst handler-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst parttool-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst video-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst terminal-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512-extra.1

COMMANDFILES += cmd-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst
FSFILES += fs-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst
PARTTOOLFILES += parttool-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst
PARTMAPFILES += partmap-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst
HANDLERFILES += handler-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst
TERMINALFILES += terminal-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst
VIDEOFILES += video-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst

cmd-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst: lib/libgcrypt-grub/cipher/sha512.c $(lib/libgcrypt-grub/cipher/sha512.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha512_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_sha512 > $@ || (rm -f $@; exit 1)

fs-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst: lib/libgcrypt-grub/cipher/sha512.c $(lib/libgcrypt-grub/cipher/sha512.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_sha512_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_sha512 > $@ || (rm -f $@; exit 1)

parttool-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst: lib/libgcrypt-grub/cipher/sha512.c $(lib/libgcrypt-grub/cipher/sha512.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha512_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_sha512 > $@ || (rm -f $@; exit 1)

partmap-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst: lib/libgcrypt-grub/cipher/sha512.c $(lib/libgcrypt-grub/cipher/sha512.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_sha512_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_sha512 > $@ || (rm -f $@; exit 1)

handler-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst: lib/libgcrypt-grub/cipher/sha512.c $(lib/libgcrypt-grub/cipher/sha512.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha512_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_sha512 > $@ || (rm -f $@; exit 1)

terminal-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst: lib/libgcrypt-grub/cipher/sha512.c $(lib/libgcrypt-grub/cipher/sha512.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha512_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_sha512 > $@ || (rm -f $@; exit 1)

video-gcry_sha512_mod-lib_libgcrypt_grub_cipher_sha512.lst: lib/libgcrypt-grub/cipher/sha512.c $(lib/libgcrypt-grub/cipher/sha512.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_sha512_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_sha512 > $@ || (rm -f $@; exit 1)

gcry_sha512_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_sha512_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/camellia.h
MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/seed.c
pkglib_MODULES += gcry_seed.mod
gcry_seed_mod_SOURCES = lib/libgcrypt-grub/cipher/seed.c

clean-module-gcry_seed.mod.1:
	rm -f gcry_seed.mod mod-gcry_seed.o mod-gcry_seed.c pre-gcry_seed.o gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.o und-gcry_seed.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_seed.mod.1

clean-module-gcry_seed.mod-symbol.1:
	rm -f def-gcry_seed.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_seed.mod-symbol.1
DEFSYMFILES += def-gcry_seed.lst
mostlyclean-module-gcry_seed.mod.1:
	rm -f gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_seed.mod.1
UNDSYMFILES += und-gcry_seed.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_seed.mod: pre-gcry_seed.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_seed_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_seed.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_seed.mod: pre-gcry_seed.o mod-gcry_seed.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_seed_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_seed.o mod-gcry_seed.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_seed.mod: pre-gcry_seed.o mod-gcry_seed.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_seed_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_seed.o mod-gcry_seed.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_seed.o: $(gcry_seed_mod_DEPENDENCIES) gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.o
	-rm -f $@
	$(TARGET_CC) $(gcry_seed_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.o

mod-gcry_seed.o: mod-gcry_seed.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_seed_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_seed.c\" -c -o $@ $<

mod-gcry_seed.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_seed' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_seed.lst: pre-gcry_seed.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_seed/' > $@
else
def-gcry_seed.lst: pre-gcry_seed.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_seed/' > $@
endif

und-gcry_seed.lst: pre-gcry_seed.o
	echo 'gcry_seed' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.o: lib/libgcrypt-grub/cipher/seed.c $(lib/libgcrypt-grub/cipher/seed.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_seed_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/seed.c\" -MD -c -o $@ $<
-include gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.d

clean-module-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed-extra.1:
	rm -f cmd-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst fs-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst partmap-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst handler-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst parttool-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst video-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst terminal-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed-extra.1

COMMANDFILES += cmd-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst
FSFILES += fs-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst
PARTTOOLFILES += parttool-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst
PARTMAPFILES += partmap-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst
HANDLERFILES += handler-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst
TERMINALFILES += terminal-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst
VIDEOFILES += video-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst

cmd-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst: lib/libgcrypt-grub/cipher/seed.c $(lib/libgcrypt-grub/cipher/seed.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_seed_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_seed > $@ || (rm -f $@; exit 1)

fs-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst: lib/libgcrypt-grub/cipher/seed.c $(lib/libgcrypt-grub/cipher/seed.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_seed_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_seed > $@ || (rm -f $@; exit 1)

parttool-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst: lib/libgcrypt-grub/cipher/seed.c $(lib/libgcrypt-grub/cipher/seed.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_seed_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_seed > $@ || (rm -f $@; exit 1)

partmap-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst: lib/libgcrypt-grub/cipher/seed.c $(lib/libgcrypt-grub/cipher/seed.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_seed_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_seed > $@ || (rm -f $@; exit 1)

handler-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst: lib/libgcrypt-grub/cipher/seed.c $(lib/libgcrypt-grub/cipher/seed.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_seed_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_seed > $@ || (rm -f $@; exit 1)

terminal-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst: lib/libgcrypt-grub/cipher/seed.c $(lib/libgcrypt-grub/cipher/seed.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_seed_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_seed > $@ || (rm -f $@; exit 1)

video-gcry_seed_mod-lib_libgcrypt_grub_cipher_seed.lst: lib/libgcrypt-grub/cipher/seed.c $(lib/libgcrypt-grub/cipher/seed.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_seed_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_seed > $@ || (rm -f $@; exit 1)

gcry_seed_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_seed_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/dsa.c
MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/md4.c
pkglib_MODULES += gcry_md4.mod
gcry_md4_mod_SOURCES = lib/libgcrypt-grub/cipher/md4.c

clean-module-gcry_md4.mod.1:
	rm -f gcry_md4.mod mod-gcry_md4.o mod-gcry_md4.c pre-gcry_md4.o gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.o und-gcry_md4.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_md4.mod.1

clean-module-gcry_md4.mod-symbol.1:
	rm -f def-gcry_md4.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_md4.mod-symbol.1
DEFSYMFILES += def-gcry_md4.lst
mostlyclean-module-gcry_md4.mod.1:
	rm -f gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_md4.mod.1
UNDSYMFILES += und-gcry_md4.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_md4.mod: pre-gcry_md4.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_md4_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_md4.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_md4.mod: pre-gcry_md4.o mod-gcry_md4.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_md4_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_md4.o mod-gcry_md4.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_md4.mod: pre-gcry_md4.o mod-gcry_md4.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_md4_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_md4.o mod-gcry_md4.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_md4.o: $(gcry_md4_mod_DEPENDENCIES) gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.o
	-rm -f $@
	$(TARGET_CC) $(gcry_md4_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.o

mod-gcry_md4.o: mod-gcry_md4.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_md4_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_md4.c\" -c -o $@ $<

mod-gcry_md4.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_md4' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_md4.lst: pre-gcry_md4.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_md4/' > $@
else
def-gcry_md4.lst: pre-gcry_md4.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_md4/' > $@
endif

und-gcry_md4.lst: pre-gcry_md4.o
	echo 'gcry_md4' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.o: lib/libgcrypt-grub/cipher/md4.c $(lib/libgcrypt-grub/cipher/md4.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_md4_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/md4.c\" -MD -c -o $@ $<
-include gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.d

clean-module-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4-extra.1:
	rm -f cmd-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst fs-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst partmap-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst handler-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst parttool-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst video-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst terminal-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4-extra.1

COMMANDFILES += cmd-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst
FSFILES += fs-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst
PARTTOOLFILES += parttool-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst
PARTMAPFILES += partmap-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst
HANDLERFILES += handler-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst
TERMINALFILES += terminal-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst
VIDEOFILES += video-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst

cmd-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst: lib/libgcrypt-grub/cipher/md4.c $(lib/libgcrypt-grub/cipher/md4.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_md4_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_md4 > $@ || (rm -f $@; exit 1)

fs-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst: lib/libgcrypt-grub/cipher/md4.c $(lib/libgcrypt-grub/cipher/md4.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_md4_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_md4 > $@ || (rm -f $@; exit 1)

parttool-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst: lib/libgcrypt-grub/cipher/md4.c $(lib/libgcrypt-grub/cipher/md4.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_md4_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_md4 > $@ || (rm -f $@; exit 1)

partmap-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst: lib/libgcrypt-grub/cipher/md4.c $(lib/libgcrypt-grub/cipher/md4.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_md4_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_md4 > $@ || (rm -f $@; exit 1)

handler-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst: lib/libgcrypt-grub/cipher/md4.c $(lib/libgcrypt-grub/cipher/md4.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_md4_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_md4 > $@ || (rm -f $@; exit 1)

terminal-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst: lib/libgcrypt-grub/cipher/md4.c $(lib/libgcrypt-grub/cipher/md4.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_md4_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_md4 > $@ || (rm -f $@; exit 1)

video-gcry_md4_mod-lib_libgcrypt_grub_cipher_md4.lst: lib/libgcrypt-grub/cipher/md4.c $(lib/libgcrypt-grub/cipher/md4.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_md4_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_md4 > $@ || (rm -f $@; exit 1)

gcry_md4_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_md4_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/tiger.c
pkglib_MODULES += gcry_tiger.mod
gcry_tiger_mod_SOURCES = lib/libgcrypt-grub/cipher/tiger.c

clean-module-gcry_tiger.mod.1:
	rm -f gcry_tiger.mod mod-gcry_tiger.o mod-gcry_tiger.c pre-gcry_tiger.o gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.o und-gcry_tiger.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_tiger.mod.1

clean-module-gcry_tiger.mod-symbol.1:
	rm -f def-gcry_tiger.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_tiger.mod-symbol.1
DEFSYMFILES += def-gcry_tiger.lst
mostlyclean-module-gcry_tiger.mod.1:
	rm -f gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_tiger.mod.1
UNDSYMFILES += und-gcry_tiger.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_tiger.mod: pre-gcry_tiger.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_tiger_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_tiger.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_tiger.mod: pre-gcry_tiger.o mod-gcry_tiger.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_tiger_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_tiger.o mod-gcry_tiger.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_tiger.mod: pre-gcry_tiger.o mod-gcry_tiger.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_tiger_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_tiger.o mod-gcry_tiger.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_tiger.o: $(gcry_tiger_mod_DEPENDENCIES) gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.o
	-rm -f $@
	$(TARGET_CC) $(gcry_tiger_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.o

mod-gcry_tiger.o: mod-gcry_tiger.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_tiger_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_tiger.c\" -c -o $@ $<

mod-gcry_tiger.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_tiger' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_tiger.lst: pre-gcry_tiger.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_tiger/' > $@
else
def-gcry_tiger.lst: pre-gcry_tiger.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_tiger/' > $@
endif

und-gcry_tiger.lst: pre-gcry_tiger.o
	echo 'gcry_tiger' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.o: lib/libgcrypt-grub/cipher/tiger.c $(lib/libgcrypt-grub/cipher/tiger.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_tiger_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/tiger.c\" -MD -c -o $@ $<
-include gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.d

clean-module-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger-extra.1:
	rm -f cmd-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst fs-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst partmap-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst handler-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst parttool-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst video-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst terminal-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger-extra.1

COMMANDFILES += cmd-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst
FSFILES += fs-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst
PARTTOOLFILES += parttool-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst
PARTMAPFILES += partmap-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst
HANDLERFILES += handler-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst
TERMINALFILES += terminal-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst
VIDEOFILES += video-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst

cmd-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst: lib/libgcrypt-grub/cipher/tiger.c $(lib/libgcrypt-grub/cipher/tiger.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_tiger_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_tiger > $@ || (rm -f $@; exit 1)

fs-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst: lib/libgcrypt-grub/cipher/tiger.c $(lib/libgcrypt-grub/cipher/tiger.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_tiger_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_tiger > $@ || (rm -f $@; exit 1)

parttool-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst: lib/libgcrypt-grub/cipher/tiger.c $(lib/libgcrypt-grub/cipher/tiger.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_tiger_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_tiger > $@ || (rm -f $@; exit 1)

partmap-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst: lib/libgcrypt-grub/cipher/tiger.c $(lib/libgcrypt-grub/cipher/tiger.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_tiger_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_tiger > $@ || (rm -f $@; exit 1)

handler-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst: lib/libgcrypt-grub/cipher/tiger.c $(lib/libgcrypt-grub/cipher/tiger.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_tiger_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_tiger > $@ || (rm -f $@; exit 1)

terminal-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst: lib/libgcrypt-grub/cipher/tiger.c $(lib/libgcrypt-grub/cipher/tiger.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_tiger_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_tiger > $@ || (rm -f $@; exit 1)

video-gcry_tiger_mod-lib_libgcrypt_grub_cipher_tiger.lst: lib/libgcrypt-grub/cipher/tiger.c $(lib/libgcrypt-grub/cipher/tiger.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_tiger_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_tiger > $@ || (rm -f $@; exit 1)

gcry_tiger_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_tiger_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/elgamal.c
MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/ecc.c
MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/rmd.h
MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/crc.c
pkglib_MODULES += gcry_crc.mod
gcry_crc_mod_SOURCES = lib/libgcrypt-grub/cipher/crc.c

clean-module-gcry_crc.mod.1:
	rm -f gcry_crc.mod mod-gcry_crc.o mod-gcry_crc.c pre-gcry_crc.o gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.o und-gcry_crc.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_crc.mod.1

clean-module-gcry_crc.mod-symbol.1:
	rm -f def-gcry_crc.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_crc.mod-symbol.1
DEFSYMFILES += def-gcry_crc.lst
mostlyclean-module-gcry_crc.mod.1:
	rm -f gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_crc.mod.1
UNDSYMFILES += und-gcry_crc.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_crc.mod: pre-gcry_crc.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_crc_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_crc.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_crc.mod: pre-gcry_crc.o mod-gcry_crc.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_crc_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_crc.o mod-gcry_crc.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_crc.mod: pre-gcry_crc.o mod-gcry_crc.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_crc_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_crc.o mod-gcry_crc.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_crc.o: $(gcry_crc_mod_DEPENDENCIES) gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.o
	-rm -f $@
	$(TARGET_CC) $(gcry_crc_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.o

mod-gcry_crc.o: mod-gcry_crc.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_crc_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_crc.c\" -c -o $@ $<

mod-gcry_crc.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_crc' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_crc.lst: pre-gcry_crc.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_crc/' > $@
else
def-gcry_crc.lst: pre-gcry_crc.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_crc/' > $@
endif

und-gcry_crc.lst: pre-gcry_crc.o
	echo 'gcry_crc' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.o: lib/libgcrypt-grub/cipher/crc.c $(lib/libgcrypt-grub/cipher/crc.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_crc_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/crc.c\" -MD -c -o $@ $<
-include gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.d

clean-module-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc-extra.1:
	rm -f cmd-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst fs-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst partmap-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst handler-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst parttool-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst video-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst terminal-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc-extra.1

COMMANDFILES += cmd-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst
FSFILES += fs-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst
PARTTOOLFILES += parttool-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst
PARTMAPFILES += partmap-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst
HANDLERFILES += handler-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst
TERMINALFILES += terminal-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst
VIDEOFILES += video-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst

cmd-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst: lib/libgcrypt-grub/cipher/crc.c $(lib/libgcrypt-grub/cipher/crc.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_crc_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_crc > $@ || (rm -f $@; exit 1)

fs-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst: lib/libgcrypt-grub/cipher/crc.c $(lib/libgcrypt-grub/cipher/crc.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_crc_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_crc > $@ || (rm -f $@; exit 1)

parttool-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst: lib/libgcrypt-grub/cipher/crc.c $(lib/libgcrypt-grub/cipher/crc.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_crc_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_crc > $@ || (rm -f $@; exit 1)

partmap-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst: lib/libgcrypt-grub/cipher/crc.c $(lib/libgcrypt-grub/cipher/crc.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_crc_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_crc > $@ || (rm -f $@; exit 1)

handler-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst: lib/libgcrypt-grub/cipher/crc.c $(lib/libgcrypt-grub/cipher/crc.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_crc_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_crc > $@ || (rm -f $@; exit 1)

terminal-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst: lib/libgcrypt-grub/cipher/crc.c $(lib/libgcrypt-grub/cipher/crc.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_crc_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_crc > $@ || (rm -f $@; exit 1)

video-gcry_crc_mod-lib_libgcrypt_grub_cipher_crc.lst: lib/libgcrypt-grub/cipher/crc.c $(lib/libgcrypt-grub/cipher/crc.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_crc_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_crc > $@ || (rm -f $@; exit 1)

gcry_crc_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_crc_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/hash-common.h
MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/md5.c
pkglib_MODULES += gcry_md5.mod
gcry_md5_mod_SOURCES = lib/libgcrypt-grub/cipher/md5.c

clean-module-gcry_md5.mod.1:
	rm -f gcry_md5.mod mod-gcry_md5.o mod-gcry_md5.c pre-gcry_md5.o gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.o und-gcry_md5.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_md5.mod.1

clean-module-gcry_md5.mod-symbol.1:
	rm -f def-gcry_md5.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_md5.mod-symbol.1
DEFSYMFILES += def-gcry_md5.lst
mostlyclean-module-gcry_md5.mod.1:
	rm -f gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_md5.mod.1
UNDSYMFILES += und-gcry_md5.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_md5.mod: pre-gcry_md5.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_md5_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_md5.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_md5.mod: pre-gcry_md5.o mod-gcry_md5.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_md5_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_md5.o mod-gcry_md5.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_md5.mod: pre-gcry_md5.o mod-gcry_md5.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_md5_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_md5.o mod-gcry_md5.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_md5.o: $(gcry_md5_mod_DEPENDENCIES) gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.o
	-rm -f $@
	$(TARGET_CC) $(gcry_md5_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.o

mod-gcry_md5.o: mod-gcry_md5.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_md5_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_md5.c\" -c -o $@ $<

mod-gcry_md5.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_md5' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_md5.lst: pre-gcry_md5.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_md5/' > $@
else
def-gcry_md5.lst: pre-gcry_md5.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_md5/' > $@
endif

und-gcry_md5.lst: pre-gcry_md5.o
	echo 'gcry_md5' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.o: lib/libgcrypt-grub/cipher/md5.c $(lib/libgcrypt-grub/cipher/md5.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_md5_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/md5.c\" -MD -c -o $@ $<
-include gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.d

clean-module-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5-extra.1:
	rm -f cmd-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst fs-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst partmap-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst handler-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst parttool-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst video-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst terminal-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5-extra.1

COMMANDFILES += cmd-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst
FSFILES += fs-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst
PARTTOOLFILES += parttool-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst
PARTMAPFILES += partmap-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst
HANDLERFILES += handler-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst
TERMINALFILES += terminal-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst
VIDEOFILES += video-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst

cmd-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst: lib/libgcrypt-grub/cipher/md5.c $(lib/libgcrypt-grub/cipher/md5.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_md5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_md5 > $@ || (rm -f $@; exit 1)

fs-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst: lib/libgcrypt-grub/cipher/md5.c $(lib/libgcrypt-grub/cipher/md5.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_md5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_md5 > $@ || (rm -f $@; exit 1)

parttool-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst: lib/libgcrypt-grub/cipher/md5.c $(lib/libgcrypt-grub/cipher/md5.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_md5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_md5 > $@ || (rm -f $@; exit 1)

partmap-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst: lib/libgcrypt-grub/cipher/md5.c $(lib/libgcrypt-grub/cipher/md5.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_md5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_md5 > $@ || (rm -f $@; exit 1)

handler-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst: lib/libgcrypt-grub/cipher/md5.c $(lib/libgcrypt-grub/cipher/md5.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_md5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_md5 > $@ || (rm -f $@; exit 1)

terminal-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst: lib/libgcrypt-grub/cipher/md5.c $(lib/libgcrypt-grub/cipher/md5.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_md5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_md5 > $@ || (rm -f $@; exit 1)

video-gcry_md5_mod-lib_libgcrypt_grub_cipher_md5.lst: lib/libgcrypt-grub/cipher/md5.c $(lib/libgcrypt-grub/cipher/md5.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_md5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_md5 > $@ || (rm -f $@; exit 1)

gcry_md5_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_md5_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/camellia.c
MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/serpent.c
pkglib_MODULES += gcry_serpent.mod
gcry_serpent_mod_SOURCES = lib/libgcrypt-grub/cipher/serpent.c

clean-module-gcry_serpent.mod.1:
	rm -f gcry_serpent.mod mod-gcry_serpent.o mod-gcry_serpent.c pre-gcry_serpent.o gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.o und-gcry_serpent.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_serpent.mod.1

clean-module-gcry_serpent.mod-symbol.1:
	rm -f def-gcry_serpent.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_serpent.mod-symbol.1
DEFSYMFILES += def-gcry_serpent.lst
mostlyclean-module-gcry_serpent.mod.1:
	rm -f gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_serpent.mod.1
UNDSYMFILES += und-gcry_serpent.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_serpent.mod: pre-gcry_serpent.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_serpent_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_serpent.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_serpent.mod: pre-gcry_serpent.o mod-gcry_serpent.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_serpent_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_serpent.o mod-gcry_serpent.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_serpent.mod: pre-gcry_serpent.o mod-gcry_serpent.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_serpent_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_serpent.o mod-gcry_serpent.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_serpent.o: $(gcry_serpent_mod_DEPENDENCIES) gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.o
	-rm -f $@
	$(TARGET_CC) $(gcry_serpent_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.o

mod-gcry_serpent.o: mod-gcry_serpent.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_serpent_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_serpent.c\" -c -o $@ $<

mod-gcry_serpent.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_serpent' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_serpent.lst: pre-gcry_serpent.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_serpent/' > $@
else
def-gcry_serpent.lst: pre-gcry_serpent.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_serpent/' > $@
endif

und-gcry_serpent.lst: pre-gcry_serpent.o
	echo 'gcry_serpent' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.o: lib/libgcrypt-grub/cipher/serpent.c $(lib/libgcrypt-grub/cipher/serpent.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_serpent_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/serpent.c\" -MD -c -o $@ $<
-include gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.d

clean-module-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent-extra.1:
	rm -f cmd-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst fs-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst partmap-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst handler-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst parttool-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst video-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst terminal-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent-extra.1

COMMANDFILES += cmd-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst
FSFILES += fs-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst
PARTTOOLFILES += parttool-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst
PARTMAPFILES += partmap-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst
HANDLERFILES += handler-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst
TERMINALFILES += terminal-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst
VIDEOFILES += video-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst

cmd-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst: lib/libgcrypt-grub/cipher/serpent.c $(lib/libgcrypt-grub/cipher/serpent.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_serpent_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_serpent > $@ || (rm -f $@; exit 1)

fs-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst: lib/libgcrypt-grub/cipher/serpent.c $(lib/libgcrypt-grub/cipher/serpent.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_serpent_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_serpent > $@ || (rm -f $@; exit 1)

parttool-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst: lib/libgcrypt-grub/cipher/serpent.c $(lib/libgcrypt-grub/cipher/serpent.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_serpent_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_serpent > $@ || (rm -f $@; exit 1)

partmap-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst: lib/libgcrypt-grub/cipher/serpent.c $(lib/libgcrypt-grub/cipher/serpent.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_serpent_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_serpent > $@ || (rm -f $@; exit 1)

handler-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst: lib/libgcrypt-grub/cipher/serpent.c $(lib/libgcrypt-grub/cipher/serpent.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_serpent_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_serpent > $@ || (rm -f $@; exit 1)

terminal-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst: lib/libgcrypt-grub/cipher/serpent.c $(lib/libgcrypt-grub/cipher/serpent.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_serpent_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_serpent > $@ || (rm -f $@; exit 1)

video-gcry_serpent_mod-lib_libgcrypt_grub_cipher_serpent.lst: lib/libgcrypt-grub/cipher/serpent.c $(lib/libgcrypt-grub/cipher/serpent.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_serpent_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_serpent > $@ || (rm -f $@; exit 1)

gcry_serpent_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_serpent_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/arcfour.c
pkglib_MODULES += gcry_arcfour.mod
gcry_arcfour_mod_SOURCES = lib/libgcrypt-grub/cipher/arcfour.c

clean-module-gcry_arcfour.mod.1:
	rm -f gcry_arcfour.mod mod-gcry_arcfour.o mod-gcry_arcfour.c pre-gcry_arcfour.o gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.o und-gcry_arcfour.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_arcfour.mod.1

clean-module-gcry_arcfour.mod-symbol.1:
	rm -f def-gcry_arcfour.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_arcfour.mod-symbol.1
DEFSYMFILES += def-gcry_arcfour.lst
mostlyclean-module-gcry_arcfour.mod.1:
	rm -f gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_arcfour.mod.1
UNDSYMFILES += und-gcry_arcfour.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_arcfour.mod: pre-gcry_arcfour.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_arcfour_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_arcfour.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_arcfour.mod: pre-gcry_arcfour.o mod-gcry_arcfour.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_arcfour_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_arcfour.o mod-gcry_arcfour.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_arcfour.mod: pre-gcry_arcfour.o mod-gcry_arcfour.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_arcfour_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_arcfour.o mod-gcry_arcfour.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_arcfour.o: $(gcry_arcfour_mod_DEPENDENCIES) gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.o
	-rm -f $@
	$(TARGET_CC) $(gcry_arcfour_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.o

mod-gcry_arcfour.o: mod-gcry_arcfour.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_arcfour_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_arcfour.c\" -c -o $@ $<

mod-gcry_arcfour.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_arcfour' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_arcfour.lst: pre-gcry_arcfour.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_arcfour/' > $@
else
def-gcry_arcfour.lst: pre-gcry_arcfour.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_arcfour/' > $@
endif

und-gcry_arcfour.lst: pre-gcry_arcfour.o
	echo 'gcry_arcfour' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.o: lib/libgcrypt-grub/cipher/arcfour.c $(lib/libgcrypt-grub/cipher/arcfour.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_arcfour_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/arcfour.c\" -MD -c -o $@ $<
-include gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.d

clean-module-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour-extra.1:
	rm -f cmd-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst fs-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst partmap-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst handler-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst parttool-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst video-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst terminal-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour-extra.1

COMMANDFILES += cmd-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst
FSFILES += fs-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst
PARTTOOLFILES += parttool-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst
PARTMAPFILES += partmap-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst
HANDLERFILES += handler-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst
TERMINALFILES += terminal-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst
VIDEOFILES += video-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst

cmd-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst: lib/libgcrypt-grub/cipher/arcfour.c $(lib/libgcrypt-grub/cipher/arcfour.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_arcfour_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_arcfour > $@ || (rm -f $@; exit 1)

fs-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst: lib/libgcrypt-grub/cipher/arcfour.c $(lib/libgcrypt-grub/cipher/arcfour.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_arcfour_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_arcfour > $@ || (rm -f $@; exit 1)

parttool-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst: lib/libgcrypt-grub/cipher/arcfour.c $(lib/libgcrypt-grub/cipher/arcfour.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_arcfour_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_arcfour > $@ || (rm -f $@; exit 1)

partmap-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst: lib/libgcrypt-grub/cipher/arcfour.c $(lib/libgcrypt-grub/cipher/arcfour.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_arcfour_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_arcfour > $@ || (rm -f $@; exit 1)

handler-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst: lib/libgcrypt-grub/cipher/arcfour.c $(lib/libgcrypt-grub/cipher/arcfour.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_arcfour_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_arcfour > $@ || (rm -f $@; exit 1)

terminal-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst: lib/libgcrypt-grub/cipher/arcfour.c $(lib/libgcrypt-grub/cipher/arcfour.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_arcfour_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_arcfour > $@ || (rm -f $@; exit 1)

video-gcry_arcfour_mod-lib_libgcrypt_grub_cipher_arcfour.lst: lib/libgcrypt-grub/cipher/arcfour.c $(lib/libgcrypt-grub/cipher/arcfour.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_arcfour_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_arcfour > $@ || (rm -f $@; exit 1)

gcry_arcfour_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_arcfour_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/whirlpool.c
pkglib_MODULES += gcry_whirlpool.mod
gcry_whirlpool_mod_SOURCES = lib/libgcrypt-grub/cipher/whirlpool.c

clean-module-gcry_whirlpool.mod.1:
	rm -f gcry_whirlpool.mod mod-gcry_whirlpool.o mod-gcry_whirlpool.c pre-gcry_whirlpool.o gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.o und-gcry_whirlpool.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_whirlpool.mod.1

clean-module-gcry_whirlpool.mod-symbol.1:
	rm -f def-gcry_whirlpool.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_whirlpool.mod-symbol.1
DEFSYMFILES += def-gcry_whirlpool.lst
mostlyclean-module-gcry_whirlpool.mod.1:
	rm -f gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_whirlpool.mod.1
UNDSYMFILES += und-gcry_whirlpool.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_whirlpool.mod: pre-gcry_whirlpool.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_whirlpool_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_whirlpool.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_whirlpool.mod: pre-gcry_whirlpool.o mod-gcry_whirlpool.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_whirlpool_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_whirlpool.o mod-gcry_whirlpool.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_whirlpool.mod: pre-gcry_whirlpool.o mod-gcry_whirlpool.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_whirlpool_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_whirlpool.o mod-gcry_whirlpool.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_whirlpool.o: $(gcry_whirlpool_mod_DEPENDENCIES) gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.o
	-rm -f $@
	$(TARGET_CC) $(gcry_whirlpool_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.o

mod-gcry_whirlpool.o: mod-gcry_whirlpool.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_whirlpool_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_whirlpool.c\" -c -o $@ $<

mod-gcry_whirlpool.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_whirlpool' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_whirlpool.lst: pre-gcry_whirlpool.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_whirlpool/' > $@
else
def-gcry_whirlpool.lst: pre-gcry_whirlpool.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_whirlpool/' > $@
endif

und-gcry_whirlpool.lst: pre-gcry_whirlpool.o
	echo 'gcry_whirlpool' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.o: lib/libgcrypt-grub/cipher/whirlpool.c $(lib/libgcrypt-grub/cipher/whirlpool.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_whirlpool_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/whirlpool.c\" -MD -c -o $@ $<
-include gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.d

clean-module-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool-extra.1:
	rm -f cmd-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst fs-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst partmap-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst handler-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst parttool-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst video-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst terminal-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool-extra.1

COMMANDFILES += cmd-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst
FSFILES += fs-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst
PARTTOOLFILES += parttool-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst
PARTMAPFILES += partmap-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst
HANDLERFILES += handler-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst
TERMINALFILES += terminal-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst
VIDEOFILES += video-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst

cmd-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst: lib/libgcrypt-grub/cipher/whirlpool.c $(lib/libgcrypt-grub/cipher/whirlpool.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_whirlpool_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_whirlpool > $@ || (rm -f $@; exit 1)

fs-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst: lib/libgcrypt-grub/cipher/whirlpool.c $(lib/libgcrypt-grub/cipher/whirlpool.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_whirlpool_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_whirlpool > $@ || (rm -f $@; exit 1)

parttool-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst: lib/libgcrypt-grub/cipher/whirlpool.c $(lib/libgcrypt-grub/cipher/whirlpool.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_whirlpool_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_whirlpool > $@ || (rm -f $@; exit 1)

partmap-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst: lib/libgcrypt-grub/cipher/whirlpool.c $(lib/libgcrypt-grub/cipher/whirlpool.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_whirlpool_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_whirlpool > $@ || (rm -f $@; exit 1)

handler-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst: lib/libgcrypt-grub/cipher/whirlpool.c $(lib/libgcrypt-grub/cipher/whirlpool.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_whirlpool_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_whirlpool > $@ || (rm -f $@; exit 1)

terminal-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst: lib/libgcrypt-grub/cipher/whirlpool.c $(lib/libgcrypt-grub/cipher/whirlpool.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_whirlpool_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_whirlpool > $@ || (rm -f $@; exit 1)

video-gcry_whirlpool_mod-lib_libgcrypt_grub_cipher_whirlpool.lst: lib/libgcrypt-grub/cipher/whirlpool.c $(lib/libgcrypt-grub/cipher/whirlpool.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_whirlpool_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_whirlpool > $@ || (rm -f $@; exit 1)

gcry_whirlpool_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_whirlpool_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/des.c
pkglib_MODULES += gcry_des.mod
gcry_des_mod_SOURCES = lib/libgcrypt-grub/cipher/des.c

clean-module-gcry_des.mod.1:
	rm -f gcry_des.mod mod-gcry_des.o mod-gcry_des.c pre-gcry_des.o gcry_des_mod-lib_libgcrypt_grub_cipher_des.o und-gcry_des.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_des.mod.1

clean-module-gcry_des.mod-symbol.1:
	rm -f def-gcry_des.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_des.mod-symbol.1
DEFSYMFILES += def-gcry_des.lst
mostlyclean-module-gcry_des.mod.1:
	rm -f gcry_des_mod-lib_libgcrypt_grub_cipher_des.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_des.mod.1
UNDSYMFILES += und-gcry_des.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_des.mod: pre-gcry_des.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_des_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_des.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_des.mod: pre-gcry_des.o mod-gcry_des.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_des_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_des.o mod-gcry_des.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_des.mod: pre-gcry_des.o mod-gcry_des.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_des_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_des.o mod-gcry_des.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_des.o: $(gcry_des_mod_DEPENDENCIES) gcry_des_mod-lib_libgcrypt_grub_cipher_des.o
	-rm -f $@
	$(TARGET_CC) $(gcry_des_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_des_mod-lib_libgcrypt_grub_cipher_des.o

mod-gcry_des.o: mod-gcry_des.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_des_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_des.c\" -c -o $@ $<

mod-gcry_des.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_des' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_des.lst: pre-gcry_des.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_des/' > $@
else
def-gcry_des.lst: pre-gcry_des.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_des/' > $@
endif

und-gcry_des.lst: pre-gcry_des.o
	echo 'gcry_des' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_des_mod-lib_libgcrypt_grub_cipher_des.o: lib/libgcrypt-grub/cipher/des.c $(lib/libgcrypt-grub/cipher/des.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_des_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/des.c\" -MD -c -o $@ $<
-include gcry_des_mod-lib_libgcrypt_grub_cipher_des.d

clean-module-gcry_des_mod-lib_libgcrypt_grub_cipher_des-extra.1:
	rm -f cmd-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst fs-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst partmap-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst handler-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst parttool-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst video-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst terminal-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_des_mod-lib_libgcrypt_grub_cipher_des-extra.1

COMMANDFILES += cmd-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst
FSFILES += fs-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst
PARTTOOLFILES += parttool-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst
PARTMAPFILES += partmap-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst
HANDLERFILES += handler-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst
TERMINALFILES += terminal-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst
VIDEOFILES += video-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst

cmd-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst: lib/libgcrypt-grub/cipher/des.c $(lib/libgcrypt-grub/cipher/des.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_des_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_des > $@ || (rm -f $@; exit 1)

fs-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst: lib/libgcrypt-grub/cipher/des.c $(lib/libgcrypt-grub/cipher/des.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_des_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_des > $@ || (rm -f $@; exit 1)

parttool-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst: lib/libgcrypt-grub/cipher/des.c $(lib/libgcrypt-grub/cipher/des.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_des_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_des > $@ || (rm -f $@; exit 1)

partmap-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst: lib/libgcrypt-grub/cipher/des.c $(lib/libgcrypt-grub/cipher/des.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_des_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_des > $@ || (rm -f $@; exit 1)

handler-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst: lib/libgcrypt-grub/cipher/des.c $(lib/libgcrypt-grub/cipher/des.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_des_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_des > $@ || (rm -f $@; exit 1)

terminal-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst: lib/libgcrypt-grub/cipher/des.c $(lib/libgcrypt-grub/cipher/des.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_des_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_des > $@ || (rm -f $@; exit 1)

video-gcry_des_mod-lib_libgcrypt_grub_cipher_des.lst: lib/libgcrypt-grub/cipher/des.c $(lib/libgcrypt-grub/cipher/des.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_des_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_des > $@ || (rm -f $@; exit 1)

gcry_des_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_des_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/sha256.c
pkglib_MODULES += gcry_sha256.mod
gcry_sha256_mod_SOURCES = lib/libgcrypt-grub/cipher/sha256.c

clean-module-gcry_sha256.mod.1:
	rm -f gcry_sha256.mod mod-gcry_sha256.o mod-gcry_sha256.c pre-gcry_sha256.o gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.o und-gcry_sha256.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_sha256.mod.1

clean-module-gcry_sha256.mod-symbol.1:
	rm -f def-gcry_sha256.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_sha256.mod-symbol.1
DEFSYMFILES += def-gcry_sha256.lst
mostlyclean-module-gcry_sha256.mod.1:
	rm -f gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_sha256.mod.1
UNDSYMFILES += und-gcry_sha256.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_sha256.mod: pre-gcry_sha256.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_sha256_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_sha256.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_sha256.mod: pre-gcry_sha256.o mod-gcry_sha256.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_sha256_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_sha256.o mod-gcry_sha256.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_sha256.mod: pre-gcry_sha256.o mod-gcry_sha256.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_sha256_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_sha256.o mod-gcry_sha256.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_sha256.o: $(gcry_sha256_mod_DEPENDENCIES) gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.o
	-rm -f $@
	$(TARGET_CC) $(gcry_sha256_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.o

mod-gcry_sha256.o: mod-gcry_sha256.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_sha256_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_sha256.c\" -c -o $@ $<

mod-gcry_sha256.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_sha256' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_sha256.lst: pre-gcry_sha256.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_sha256/' > $@
else
def-gcry_sha256.lst: pre-gcry_sha256.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_sha256/' > $@
endif

und-gcry_sha256.lst: pre-gcry_sha256.o
	echo 'gcry_sha256' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.o: lib/libgcrypt-grub/cipher/sha256.c $(lib/libgcrypt-grub/cipher/sha256.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha256_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/sha256.c\" -MD -c -o $@ $<
-include gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.d

clean-module-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256-extra.1:
	rm -f cmd-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst fs-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst partmap-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst handler-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst parttool-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst video-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst terminal-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256-extra.1

COMMANDFILES += cmd-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst
FSFILES += fs-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst
PARTTOOLFILES += parttool-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst
PARTMAPFILES += partmap-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst
HANDLERFILES += handler-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst
TERMINALFILES += terminal-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst
VIDEOFILES += video-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst

cmd-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst: lib/libgcrypt-grub/cipher/sha256.c $(lib/libgcrypt-grub/cipher/sha256.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha256_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_sha256 > $@ || (rm -f $@; exit 1)

fs-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst: lib/libgcrypt-grub/cipher/sha256.c $(lib/libgcrypt-grub/cipher/sha256.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_sha256_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_sha256 > $@ || (rm -f $@; exit 1)

parttool-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst: lib/libgcrypt-grub/cipher/sha256.c $(lib/libgcrypt-grub/cipher/sha256.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha256_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_sha256 > $@ || (rm -f $@; exit 1)

partmap-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst: lib/libgcrypt-grub/cipher/sha256.c $(lib/libgcrypt-grub/cipher/sha256.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_sha256_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_sha256 > $@ || (rm -f $@; exit 1)

handler-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst: lib/libgcrypt-grub/cipher/sha256.c $(lib/libgcrypt-grub/cipher/sha256.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha256_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_sha256 > $@ || (rm -f $@; exit 1)

terminal-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst: lib/libgcrypt-grub/cipher/sha256.c $(lib/libgcrypt-grub/cipher/sha256.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha256_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_sha256 > $@ || (rm -f $@; exit 1)

video-gcry_sha256_mod-lib_libgcrypt_grub_cipher_sha256.lst: lib/libgcrypt-grub/cipher/sha256.c $(lib/libgcrypt-grub/cipher/sha256.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_sha256_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_sha256 > $@ || (rm -f $@; exit 1)

gcry_sha256_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_sha256_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/twofish.c
pkglib_MODULES += gcry_twofish.mod
gcry_twofish_mod_SOURCES = lib/libgcrypt-grub/cipher/twofish.c

clean-module-gcry_twofish.mod.1:
	rm -f gcry_twofish.mod mod-gcry_twofish.o mod-gcry_twofish.c pre-gcry_twofish.o gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.o und-gcry_twofish.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_twofish.mod.1

clean-module-gcry_twofish.mod-symbol.1:
	rm -f def-gcry_twofish.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_twofish.mod-symbol.1
DEFSYMFILES += def-gcry_twofish.lst
mostlyclean-module-gcry_twofish.mod.1:
	rm -f gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_twofish.mod.1
UNDSYMFILES += und-gcry_twofish.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_twofish.mod: pre-gcry_twofish.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_twofish_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_twofish.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_twofish.mod: pre-gcry_twofish.o mod-gcry_twofish.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_twofish_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_twofish.o mod-gcry_twofish.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_twofish.mod: pre-gcry_twofish.o mod-gcry_twofish.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_twofish_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_twofish.o mod-gcry_twofish.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_twofish.o: $(gcry_twofish_mod_DEPENDENCIES) gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.o
	-rm -f $@
	$(TARGET_CC) $(gcry_twofish_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.o

mod-gcry_twofish.o: mod-gcry_twofish.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_twofish_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_twofish.c\" -c -o $@ $<

mod-gcry_twofish.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_twofish' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_twofish.lst: pre-gcry_twofish.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_twofish/' > $@
else
def-gcry_twofish.lst: pre-gcry_twofish.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_twofish/' > $@
endif

und-gcry_twofish.lst: pre-gcry_twofish.o
	echo 'gcry_twofish' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.o: lib/libgcrypt-grub/cipher/twofish.c $(lib/libgcrypt-grub/cipher/twofish.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_twofish_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/twofish.c\" -MD -c -o $@ $<
-include gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.d

clean-module-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish-extra.1:
	rm -f cmd-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst fs-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst partmap-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst handler-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst parttool-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst video-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst terminal-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish-extra.1

COMMANDFILES += cmd-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst
FSFILES += fs-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst
PARTTOOLFILES += parttool-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst
PARTMAPFILES += partmap-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst
HANDLERFILES += handler-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst
TERMINALFILES += terminal-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst
VIDEOFILES += video-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst

cmd-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst: lib/libgcrypt-grub/cipher/twofish.c $(lib/libgcrypt-grub/cipher/twofish.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_twofish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_twofish > $@ || (rm -f $@; exit 1)

fs-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst: lib/libgcrypt-grub/cipher/twofish.c $(lib/libgcrypt-grub/cipher/twofish.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_twofish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_twofish > $@ || (rm -f $@; exit 1)

parttool-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst: lib/libgcrypt-grub/cipher/twofish.c $(lib/libgcrypt-grub/cipher/twofish.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_twofish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_twofish > $@ || (rm -f $@; exit 1)

partmap-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst: lib/libgcrypt-grub/cipher/twofish.c $(lib/libgcrypt-grub/cipher/twofish.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_twofish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_twofish > $@ || (rm -f $@; exit 1)

handler-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst: lib/libgcrypt-grub/cipher/twofish.c $(lib/libgcrypt-grub/cipher/twofish.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_twofish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_twofish > $@ || (rm -f $@; exit 1)

terminal-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst: lib/libgcrypt-grub/cipher/twofish.c $(lib/libgcrypt-grub/cipher/twofish.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_twofish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_twofish > $@ || (rm -f $@; exit 1)

video-gcry_twofish_mod-lib_libgcrypt_grub_cipher_twofish.lst: lib/libgcrypt-grub/cipher/twofish.c $(lib/libgcrypt-grub/cipher/twofish.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_twofish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_twofish > $@ || (rm -f $@; exit 1)

gcry_twofish_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_twofish_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/cast5.c
pkglib_MODULES += gcry_cast5.mod
gcry_cast5_mod_SOURCES = lib/libgcrypt-grub/cipher/cast5.c

clean-module-gcry_cast5.mod.1:
	rm -f gcry_cast5.mod mod-gcry_cast5.o mod-gcry_cast5.c pre-gcry_cast5.o gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.o und-gcry_cast5.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_cast5.mod.1

clean-module-gcry_cast5.mod-symbol.1:
	rm -f def-gcry_cast5.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_cast5.mod-symbol.1
DEFSYMFILES += def-gcry_cast5.lst
mostlyclean-module-gcry_cast5.mod.1:
	rm -f gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_cast5.mod.1
UNDSYMFILES += und-gcry_cast5.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_cast5.mod: pre-gcry_cast5.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_cast5_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_cast5.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_cast5.mod: pre-gcry_cast5.o mod-gcry_cast5.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_cast5_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_cast5.o mod-gcry_cast5.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_cast5.mod: pre-gcry_cast5.o mod-gcry_cast5.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_cast5_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_cast5.o mod-gcry_cast5.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_cast5.o: $(gcry_cast5_mod_DEPENDENCIES) gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.o
	-rm -f $@
	$(TARGET_CC) $(gcry_cast5_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.o

mod-gcry_cast5.o: mod-gcry_cast5.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_cast5_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_cast5.c\" -c -o $@ $<

mod-gcry_cast5.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_cast5' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_cast5.lst: pre-gcry_cast5.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_cast5/' > $@
else
def-gcry_cast5.lst: pre-gcry_cast5.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_cast5/' > $@
endif

und-gcry_cast5.lst: pre-gcry_cast5.o
	echo 'gcry_cast5' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.o: lib/libgcrypt-grub/cipher/cast5.c $(lib/libgcrypt-grub/cipher/cast5.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_cast5_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/cast5.c\" -MD -c -o $@ $<
-include gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.d

clean-module-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5-extra.1:
	rm -f cmd-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst fs-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst partmap-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst handler-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst parttool-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst video-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst terminal-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5-extra.1

COMMANDFILES += cmd-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst
FSFILES += fs-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst
PARTTOOLFILES += parttool-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst
PARTMAPFILES += partmap-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst
HANDLERFILES += handler-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst
TERMINALFILES += terminal-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst
VIDEOFILES += video-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst

cmd-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst: lib/libgcrypt-grub/cipher/cast5.c $(lib/libgcrypt-grub/cipher/cast5.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_cast5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_cast5 > $@ || (rm -f $@; exit 1)

fs-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst: lib/libgcrypt-grub/cipher/cast5.c $(lib/libgcrypt-grub/cipher/cast5.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_cast5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_cast5 > $@ || (rm -f $@; exit 1)

parttool-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst: lib/libgcrypt-grub/cipher/cast5.c $(lib/libgcrypt-grub/cipher/cast5.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_cast5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_cast5 > $@ || (rm -f $@; exit 1)

partmap-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst: lib/libgcrypt-grub/cipher/cast5.c $(lib/libgcrypt-grub/cipher/cast5.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_cast5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_cast5 > $@ || (rm -f $@; exit 1)

handler-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst: lib/libgcrypt-grub/cipher/cast5.c $(lib/libgcrypt-grub/cipher/cast5.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_cast5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_cast5 > $@ || (rm -f $@; exit 1)

terminal-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst: lib/libgcrypt-grub/cipher/cast5.c $(lib/libgcrypt-grub/cipher/cast5.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_cast5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_cast5 > $@ || (rm -f $@; exit 1)

video-gcry_cast5_mod-lib_libgcrypt_grub_cipher_cast5.lst: lib/libgcrypt-grub/cipher/cast5.c $(lib/libgcrypt-grub/cipher/cast5.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_cast5_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_cast5 > $@ || (rm -f $@; exit 1)

gcry_cast5_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_cast5_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/rsa.c
MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/sha1.c
pkglib_MODULES += gcry_sha1.mod
gcry_sha1_mod_SOURCES = lib/libgcrypt-grub/cipher/sha1.c

clean-module-gcry_sha1.mod.1:
	rm -f gcry_sha1.mod mod-gcry_sha1.o mod-gcry_sha1.c pre-gcry_sha1.o gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.o und-gcry_sha1.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_sha1.mod.1

clean-module-gcry_sha1.mod-symbol.1:
	rm -f def-gcry_sha1.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_sha1.mod-symbol.1
DEFSYMFILES += def-gcry_sha1.lst
mostlyclean-module-gcry_sha1.mod.1:
	rm -f gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_sha1.mod.1
UNDSYMFILES += und-gcry_sha1.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_sha1.mod: pre-gcry_sha1.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_sha1_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_sha1.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_sha1.mod: pre-gcry_sha1.o mod-gcry_sha1.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_sha1_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_sha1.o mod-gcry_sha1.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_sha1.mod: pre-gcry_sha1.o mod-gcry_sha1.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_sha1_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_sha1.o mod-gcry_sha1.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_sha1.o: $(gcry_sha1_mod_DEPENDENCIES) gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.o
	-rm -f $@
	$(TARGET_CC) $(gcry_sha1_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.o

mod-gcry_sha1.o: mod-gcry_sha1.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_sha1_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_sha1.c\" -c -o $@ $<

mod-gcry_sha1.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_sha1' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_sha1.lst: pre-gcry_sha1.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_sha1/' > $@
else
def-gcry_sha1.lst: pre-gcry_sha1.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_sha1/' > $@
endif

und-gcry_sha1.lst: pre-gcry_sha1.o
	echo 'gcry_sha1' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.o: lib/libgcrypt-grub/cipher/sha1.c $(lib/libgcrypt-grub/cipher/sha1.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha1_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/sha1.c\" -MD -c -o $@ $<
-include gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.d

clean-module-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1-extra.1:
	rm -f cmd-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst fs-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst partmap-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst handler-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst parttool-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst video-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst terminal-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1-extra.1

COMMANDFILES += cmd-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst
FSFILES += fs-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst
PARTTOOLFILES += parttool-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst
PARTMAPFILES += partmap-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst
HANDLERFILES += handler-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst
TERMINALFILES += terminal-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst
VIDEOFILES += video-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst

cmd-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst: lib/libgcrypt-grub/cipher/sha1.c $(lib/libgcrypt-grub/cipher/sha1.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha1_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_sha1 > $@ || (rm -f $@; exit 1)

fs-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst: lib/libgcrypt-grub/cipher/sha1.c $(lib/libgcrypt-grub/cipher/sha1.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_sha1_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_sha1 > $@ || (rm -f $@; exit 1)

parttool-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst: lib/libgcrypt-grub/cipher/sha1.c $(lib/libgcrypt-grub/cipher/sha1.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha1_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_sha1 > $@ || (rm -f $@; exit 1)

partmap-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst: lib/libgcrypt-grub/cipher/sha1.c $(lib/libgcrypt-grub/cipher/sha1.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_sha1_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_sha1 > $@ || (rm -f $@; exit 1)

handler-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst: lib/libgcrypt-grub/cipher/sha1.c $(lib/libgcrypt-grub/cipher/sha1.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha1_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_sha1 > $@ || (rm -f $@; exit 1)

terminal-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst: lib/libgcrypt-grub/cipher/sha1.c $(lib/libgcrypt-grub/cipher/sha1.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_sha1_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_sha1 > $@ || (rm -f $@; exit 1)

video-gcry_sha1_mod-lib_libgcrypt_grub_cipher_sha1.lst: lib/libgcrypt-grub/cipher/sha1.c $(lib/libgcrypt-grub/cipher/sha1.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_sha1_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_sha1 > $@ || (rm -f $@; exit 1)

gcry_sha1_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_sha1_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/blowfish.c
pkglib_MODULES += gcry_blowfish.mod
gcry_blowfish_mod_SOURCES = lib/libgcrypt-grub/cipher/blowfish.c

clean-module-gcry_blowfish.mod.1:
	rm -f gcry_blowfish.mod mod-gcry_blowfish.o mod-gcry_blowfish.c pre-gcry_blowfish.o gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.o und-gcry_blowfish.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_blowfish.mod.1

clean-module-gcry_blowfish.mod-symbol.1:
	rm -f def-gcry_blowfish.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_blowfish.mod-symbol.1
DEFSYMFILES += def-gcry_blowfish.lst
mostlyclean-module-gcry_blowfish.mod.1:
	rm -f gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_blowfish.mod.1
UNDSYMFILES += und-gcry_blowfish.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_blowfish.mod: pre-gcry_blowfish.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_blowfish_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_blowfish.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_blowfish.mod: pre-gcry_blowfish.o mod-gcry_blowfish.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_blowfish_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_blowfish.o mod-gcry_blowfish.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_blowfish.mod: pre-gcry_blowfish.o mod-gcry_blowfish.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_blowfish_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_blowfish.o mod-gcry_blowfish.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_blowfish.o: $(gcry_blowfish_mod_DEPENDENCIES) gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.o
	-rm -f $@
	$(TARGET_CC) $(gcry_blowfish_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.o

mod-gcry_blowfish.o: mod-gcry_blowfish.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_blowfish_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_blowfish.c\" -c -o $@ $<

mod-gcry_blowfish.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_blowfish' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_blowfish.lst: pre-gcry_blowfish.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_blowfish/' > $@
else
def-gcry_blowfish.lst: pre-gcry_blowfish.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_blowfish/' > $@
endif

und-gcry_blowfish.lst: pre-gcry_blowfish.o
	echo 'gcry_blowfish' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.o: lib/libgcrypt-grub/cipher/blowfish.c $(lib/libgcrypt-grub/cipher/blowfish.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_blowfish_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/blowfish.c\" -MD -c -o $@ $<
-include gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.d

clean-module-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish-extra.1:
	rm -f cmd-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst fs-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst partmap-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst handler-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst parttool-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst video-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst terminal-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish-extra.1

COMMANDFILES += cmd-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst
FSFILES += fs-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst
PARTTOOLFILES += parttool-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst
PARTMAPFILES += partmap-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst
HANDLERFILES += handler-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst
TERMINALFILES += terminal-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst
VIDEOFILES += video-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst

cmd-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst: lib/libgcrypt-grub/cipher/blowfish.c $(lib/libgcrypt-grub/cipher/blowfish.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_blowfish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_blowfish > $@ || (rm -f $@; exit 1)

fs-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst: lib/libgcrypt-grub/cipher/blowfish.c $(lib/libgcrypt-grub/cipher/blowfish.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_blowfish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_blowfish > $@ || (rm -f $@; exit 1)

parttool-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst: lib/libgcrypt-grub/cipher/blowfish.c $(lib/libgcrypt-grub/cipher/blowfish.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_blowfish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_blowfish > $@ || (rm -f $@; exit 1)

partmap-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst: lib/libgcrypt-grub/cipher/blowfish.c $(lib/libgcrypt-grub/cipher/blowfish.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_blowfish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_blowfish > $@ || (rm -f $@; exit 1)

handler-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst: lib/libgcrypt-grub/cipher/blowfish.c $(lib/libgcrypt-grub/cipher/blowfish.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_blowfish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_blowfish > $@ || (rm -f $@; exit 1)

terminal-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst: lib/libgcrypt-grub/cipher/blowfish.c $(lib/libgcrypt-grub/cipher/blowfish.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_blowfish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_blowfish > $@ || (rm -f $@; exit 1)

video-gcry_blowfish_mod-lib_libgcrypt_grub_cipher_blowfish.lst: lib/libgcrypt-grub/cipher/blowfish.c $(lib/libgcrypt-grub/cipher/blowfish.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_blowfish_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_blowfish > $@ || (rm -f $@; exit 1)

gcry_blowfish_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_blowfish_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/camellia-glue.c
pkglib_MODULES += gcry_camellia.mod
gcry_camellia_mod_SOURCES = lib/libgcrypt-grub/cipher/camellia-glue.c lib/libgcrypt-grub/cipher/camellia.c

clean-module-gcry_camellia.mod.1:
	rm -f gcry_camellia.mod mod-gcry_camellia.o mod-gcry_camellia.c pre-gcry_camellia.o gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.o gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.o und-gcry_camellia.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_camellia.mod.1

clean-module-gcry_camellia.mod-symbol.1:
	rm -f def-gcry_camellia.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_camellia.mod-symbol.1
DEFSYMFILES += def-gcry_camellia.lst
mostlyclean-module-gcry_camellia.mod.1:
	rm -f gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.d gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_camellia.mod.1
UNDSYMFILES += und-gcry_camellia.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_camellia.mod: pre-gcry_camellia.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_camellia_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_camellia.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_camellia.mod: pre-gcry_camellia.o mod-gcry_camellia.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_camellia_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_camellia.o mod-gcry_camellia.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_camellia.mod: pre-gcry_camellia.o mod-gcry_camellia.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_camellia_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_camellia.o mod-gcry_camellia.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_camellia.o: $(gcry_camellia_mod_DEPENDENCIES) gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.o gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.o
	-rm -f $@
	$(TARGET_CC) $(gcry_camellia_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.o gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.o

mod-gcry_camellia.o: mod-gcry_camellia.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_camellia.c\" -c -o $@ $<

mod-gcry_camellia.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_camellia' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_camellia.lst: pre-gcry_camellia.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_camellia/' > $@
else
def-gcry_camellia.lst: pre-gcry_camellia.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_camellia/' > $@
endif

und-gcry_camellia.lst: pre-gcry_camellia.o
	echo 'gcry_camellia' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.o: lib/libgcrypt-grub/cipher/camellia-glue.c $(lib/libgcrypt-grub/cipher/camellia-glue.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/camellia-glue.c\" -MD -c -o $@ $<
-include gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.d

clean-module-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue-extra.1:
	rm -f cmd-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst fs-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst partmap-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst handler-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst parttool-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst video-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst terminal-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue-extra.1

COMMANDFILES += cmd-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst
FSFILES += fs-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst
PARTTOOLFILES += parttool-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst
PARTMAPFILES += partmap-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst
HANDLERFILES += handler-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst
TERMINALFILES += terminal-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst
VIDEOFILES += video-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst

cmd-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst: lib/libgcrypt-grub/cipher/camellia-glue.c $(lib/libgcrypt-grub/cipher/camellia-glue.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

fs-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst: lib/libgcrypt-grub/cipher/camellia-glue.c $(lib/libgcrypt-grub/cipher/camellia-glue.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

parttool-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst: lib/libgcrypt-grub/cipher/camellia-glue.c $(lib/libgcrypt-grub/cipher/camellia-glue.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

partmap-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst: lib/libgcrypt-grub/cipher/camellia-glue.c $(lib/libgcrypt-grub/cipher/camellia-glue.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

handler-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst: lib/libgcrypt-grub/cipher/camellia-glue.c $(lib/libgcrypt-grub/cipher/camellia-glue.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

terminal-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst: lib/libgcrypt-grub/cipher/camellia-glue.c $(lib/libgcrypt-grub/cipher/camellia-glue.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

video-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia_glue.lst: lib/libgcrypt-grub/cipher/camellia-glue.c $(lib/libgcrypt-grub/cipher/camellia-glue.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.o: lib/libgcrypt-grub/cipher/camellia.c $(lib/libgcrypt-grub/cipher/camellia.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/camellia.c\" -MD -c -o $@ $<
-include gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.d

clean-module-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia-extra.1:
	rm -f cmd-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst fs-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst partmap-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst handler-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst parttool-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst video-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst terminal-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia-extra.1

COMMANDFILES += cmd-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst
FSFILES += fs-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst
PARTTOOLFILES += parttool-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst
PARTMAPFILES += partmap-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst
HANDLERFILES += handler-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst
TERMINALFILES += terminal-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst
VIDEOFILES += video-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst

cmd-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst: lib/libgcrypt-grub/cipher/camellia.c $(lib/libgcrypt-grub/cipher/camellia.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

fs-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst: lib/libgcrypt-grub/cipher/camellia.c $(lib/libgcrypt-grub/cipher/camellia.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

parttool-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst: lib/libgcrypt-grub/cipher/camellia.c $(lib/libgcrypt-grub/cipher/camellia.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

partmap-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst: lib/libgcrypt-grub/cipher/camellia.c $(lib/libgcrypt-grub/cipher/camellia.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

handler-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst: lib/libgcrypt-grub/cipher/camellia.c $(lib/libgcrypt-grub/cipher/camellia.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

terminal-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst: lib/libgcrypt-grub/cipher/camellia.c $(lib/libgcrypt-grub/cipher/camellia.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

video-gcry_camellia_mod-lib_libgcrypt_grub_cipher_camellia.lst: lib/libgcrypt-grub/cipher/camellia.c $(lib/libgcrypt-grub/cipher/camellia.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_camellia_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_camellia > $@ || (rm -f $@; exit 1)

gcry_camellia_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_camellia_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/rmd160.c
pkglib_MODULES += gcry_rmd160.mod
gcry_rmd160_mod_SOURCES = lib/libgcrypt-grub/cipher/rmd160.c

clean-module-gcry_rmd160.mod.1:
	rm -f gcry_rmd160.mod mod-gcry_rmd160.o mod-gcry_rmd160.c pre-gcry_rmd160.o gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.o und-gcry_rmd160.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_rmd160.mod.1

clean-module-gcry_rmd160.mod-symbol.1:
	rm -f def-gcry_rmd160.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_rmd160.mod-symbol.1
DEFSYMFILES += def-gcry_rmd160.lst
mostlyclean-module-gcry_rmd160.mod.1:
	rm -f gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_rmd160.mod.1
UNDSYMFILES += und-gcry_rmd160.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_rmd160.mod: pre-gcry_rmd160.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_rmd160_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_rmd160.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_rmd160.mod: pre-gcry_rmd160.o mod-gcry_rmd160.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_rmd160_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_rmd160.o mod-gcry_rmd160.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_rmd160.mod: pre-gcry_rmd160.o mod-gcry_rmd160.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_rmd160_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_rmd160.o mod-gcry_rmd160.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_rmd160.o: $(gcry_rmd160_mod_DEPENDENCIES) gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.o
	-rm -f $@
	$(TARGET_CC) $(gcry_rmd160_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.o

mod-gcry_rmd160.o: mod-gcry_rmd160.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_rmd160_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_rmd160.c\" -c -o $@ $<

mod-gcry_rmd160.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_rmd160' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_rmd160.lst: pre-gcry_rmd160.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_rmd160/' > $@
else
def-gcry_rmd160.lst: pre-gcry_rmd160.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_rmd160/' > $@
endif

und-gcry_rmd160.lst: pre-gcry_rmd160.o
	echo 'gcry_rmd160' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.o: lib/libgcrypt-grub/cipher/rmd160.c $(lib/libgcrypt-grub/cipher/rmd160.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rmd160_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/rmd160.c\" -MD -c -o $@ $<
-include gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.d

clean-module-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160-extra.1:
	rm -f cmd-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst fs-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst partmap-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst handler-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst parttool-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst video-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst terminal-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160-extra.1

COMMANDFILES += cmd-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst
FSFILES += fs-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst
PARTTOOLFILES += parttool-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst
PARTMAPFILES += partmap-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst
HANDLERFILES += handler-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst
TERMINALFILES += terminal-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst
VIDEOFILES += video-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst

cmd-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst: lib/libgcrypt-grub/cipher/rmd160.c $(lib/libgcrypt-grub/cipher/rmd160.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rmd160_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_rmd160 > $@ || (rm -f $@; exit 1)

fs-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst: lib/libgcrypt-grub/cipher/rmd160.c $(lib/libgcrypt-grub/cipher/rmd160.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_rmd160_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_rmd160 > $@ || (rm -f $@; exit 1)

parttool-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst: lib/libgcrypt-grub/cipher/rmd160.c $(lib/libgcrypt-grub/cipher/rmd160.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rmd160_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_rmd160 > $@ || (rm -f $@; exit 1)

partmap-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst: lib/libgcrypt-grub/cipher/rmd160.c $(lib/libgcrypt-grub/cipher/rmd160.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_rmd160_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_rmd160 > $@ || (rm -f $@; exit 1)

handler-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst: lib/libgcrypt-grub/cipher/rmd160.c $(lib/libgcrypt-grub/cipher/rmd160.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rmd160_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_rmd160 > $@ || (rm -f $@; exit 1)

terminal-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst: lib/libgcrypt-grub/cipher/rmd160.c $(lib/libgcrypt-grub/cipher/rmd160.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rmd160_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_rmd160 > $@ || (rm -f $@; exit 1)

video-gcry_rmd160_mod-lib_libgcrypt_grub_cipher_rmd160.lst: lib/libgcrypt-grub/cipher/rmd160.c $(lib/libgcrypt-grub/cipher/rmd160.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_rmd160_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_rmd160 > $@ || (rm -f $@; exit 1)

gcry_rmd160_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_rmd160_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/rfc2268.c
pkglib_MODULES += gcry_rfc2268.mod
gcry_rfc2268_mod_SOURCES = lib/libgcrypt-grub/cipher/rfc2268.c

clean-module-gcry_rfc2268.mod.1:
	rm -f gcry_rfc2268.mod mod-gcry_rfc2268.o mod-gcry_rfc2268.c pre-gcry_rfc2268.o gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.o und-gcry_rfc2268.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_rfc2268.mod.1

clean-module-gcry_rfc2268.mod-symbol.1:
	rm -f def-gcry_rfc2268.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_rfc2268.mod-symbol.1
DEFSYMFILES += def-gcry_rfc2268.lst
mostlyclean-module-gcry_rfc2268.mod.1:
	rm -f gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.d

MOSTLYCLEAN_MODULE_TARGETS += mostlyclean-module-gcry_rfc2268.mod.1
UNDSYMFILES += und-gcry_rfc2268.lst

ifeq ($(TARGET_NO_MODULES), yes)
gcry_rfc2268.mod: pre-gcry_rfc2268.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_rfc2268_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_rfc2268.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
ifneq ($(TARGET_APPLE_CC),1)
gcry_rfc2268.mod: pre-gcry_rfc2268.o mod-gcry_rfc2268.o $(TARGET_OBJ2ELF)
	-rm -f $@
	$(TARGET_CC) $(gcry_rfc2268_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ pre-gcry_rfc2268.o mod-gcry_rfc2268.o
	if test ! -z "$(TARGET_OBJ2ELF)"; then ./$(TARGET_OBJ2ELF) $@ || (rm -f $@; exit 1); fi
	if test x$(TARGET_NO_STRIP) != xyes ; then $(STRIP) --strip-unneeded -K grub_mod_init -K grub_mod_fini -K _grub_mod_init -K _grub_mod_fini -R .note -R .comment $@; fi
else
gcry_rfc2268.mod: pre-gcry_rfc2268.o mod-gcry_rfc2268.o $(TARGET_OBJ2ELF)
	-rm -f $@
	-rm -f $@.bin
	$(TARGET_CC) $(gcry_rfc2268_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@.bin pre-gcry_rfc2268.o mod-gcry_rfc2268.o
	$(OBJCONV) -f$(TARGET_MODULE_FORMAT) -nr:_grub_mod_init:grub_mod_init -nr:_grub_mod_fini:grub_mod_fini -wd1106 -ew2030 -ew2050 -nu -nd $@.bin $@
	-rm -f $@.bin
endif
endif

pre-gcry_rfc2268.o: $(gcry_rfc2268_mod_DEPENDENCIES) gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.o
	-rm -f $@
	$(TARGET_CC) $(gcry_rfc2268_mod_LDFLAGS) $(TARGET_LDFLAGS) -Wl,-r,-d -o $@ gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.o

mod-gcry_rfc2268.o: mod-gcry_rfc2268.c
	$(TARGET_CC) $(TARGET_CPPFLAGS) $(TARGET_CFLAGS) $(gcry_rfc2268_mod_CFLAGS) -DGRUB_FILE=\"mod-gcry_rfc2268.c\" -c -o $@ $<

mod-gcry_rfc2268.c: $(builddir)/moddep.lst $(srcdir)/genmodsrc.sh
	sh $(srcdir)/genmodsrc.sh 'gcry_rfc2268' $< > $@ || (rm -f $@; exit 1)

ifneq ($(TARGET_APPLE_CC),1)
def-gcry_rfc2268.lst: pre-gcry_rfc2268.o
	$(NM) -g --defined-only -P -p $< | sed 's/^\([^ ]*\).*/\1 gcry_rfc2268/' > $@
else
def-gcry_rfc2268.lst: pre-gcry_rfc2268.o
	$(NM) -g -P -p $< | grep -E '^[a-zA-Z0-9_]* [TDS]'  | sed 's/^\([^ ]*\).*/\1 gcry_rfc2268/' > $@
endif

und-gcry_rfc2268.lst: pre-gcry_rfc2268.o
	echo 'gcry_rfc2268' > $@
	$(NM) -u -P -p $< | cut -f1 -d' ' >> $@

gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.o: lib/libgcrypt-grub/cipher/rfc2268.c $(lib/libgcrypt-grub/cipher/rfc2268.c_DEPENDENCIES)
	$(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rfc2268_mod_CFLAGS) -DGRUB_FILE=\"lib/libgcrypt-grub/cipher/rfc2268.c\" -MD -c -o $@ $<
-include gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.d

clean-module-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268-extra.1:
	rm -f cmd-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst fs-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst partmap-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst handler-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst parttool-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst video-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst terminal-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst

CLEAN_MODULE_TARGETS += clean-module-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268-extra.1

COMMANDFILES += cmd-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst
FSFILES += fs-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst
PARTTOOLFILES += parttool-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst
PARTMAPFILES += partmap-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst
HANDLERFILES += handler-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst
TERMINALFILES += terminal-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst
VIDEOFILES += video-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst

cmd-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst: lib/libgcrypt-grub/cipher/rfc2268.c $(lib/libgcrypt-grub/cipher/rfc2268.c_DEPENDENCIES) gencmdlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rfc2268_mod_CFLAGS) -E $< 	  | sh $(srcdir)/gencmdlist.sh gcry_rfc2268 > $@ || (rm -f $@; exit 1)

fs-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst: lib/libgcrypt-grub/cipher/rfc2268.c $(lib/libgcrypt-grub/cipher/rfc2268.c_DEPENDENCIES) genfslist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_rfc2268_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genfslist.sh gcry_rfc2268 > $@ || (rm -f $@; exit 1)

parttool-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst: lib/libgcrypt-grub/cipher/rfc2268.c $(lib/libgcrypt-grub/cipher/rfc2268.c_DEPENDENCIES) genparttoollist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rfc2268_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genparttoollist.sh gcry_rfc2268 > $@ || (rm -f $@; exit 1)

partmap-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst: lib/libgcrypt-grub/cipher/rfc2268.c $(lib/libgcrypt-grub/cipher/rfc2268.c_DEPENDENCIES) genpartmaplist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_rfc2268_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genpartmaplist.sh gcry_rfc2268 > $@ || (rm -f $@; exit 1)

handler-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst: lib/libgcrypt-grub/cipher/rfc2268.c $(lib/libgcrypt-grub/cipher/rfc2268.c_DEPENDENCIES) genhandlerlist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rfc2268_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genhandlerlist.sh gcry_rfc2268 > $@ || (rm -f $@; exit 1)

terminal-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst: lib/libgcrypt-grub/cipher/rfc2268.c $(lib/libgcrypt-grub/cipher/rfc2268.c_DEPENDENCIES) genterminallist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  $(TARGET_CFLAGS) $(gcry_rfc2268_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genterminallist.sh gcry_rfc2268 > $@ || (rm -f $@; exit 1)

video-gcry_rfc2268_mod-lib_libgcrypt_grub_cipher_rfc2268.lst: lib/libgcrypt-grub/cipher/rfc2268.c $(lib/libgcrypt-grub/cipher/rfc2268.c_DEPENDENCIES) genvideolist.sh
	set -e; 	  $(TARGET_CC) -Ilib/libgcrypt-grub/cipher -I$(srcdir)/lib/libgcrypt-grub/cipher $(TARGET_CPPFLAGS)  -DGRUB_LST_GENERATOR $(TARGET_CFLAGS) $(gcry_rfc2268_mod_CFLAGS) -E $< 	  | sh $(srcdir)/genvideolist.sh gcry_rfc2268 > $@ || (rm -f $@; exit 1)

gcry_rfc2268_mod_CFLAGS = $(COMMON_CFLAGS) -Wno-missing-field-initializers -Wno-error -I$(srcdir)/lib/libgcrypt_wrap
gcry_rfc2268_mod_LDFLAGS = $(COMMON_LDFLAGS)

MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/rijndael-tables.h
MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/bithelp.h
MAINTAINER_CLEANFILES += $(srcdir)/lib/libgcrypt-grub/cipher/primegen.c
